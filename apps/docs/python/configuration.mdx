---
title: "Configuration"
description: "Complete VexConfig reference for the Python SDK."
---

Pass a `VexConfig` instance as the second argument to the `Vex` constructor to override any default values. All fields are optional — omitted fields use the defaults shown below.

```python
from vex import Vex, VexConfig

guard = Vex(
    api_key=os.environ["VEX_API_KEY"],
    config=VexConfig(
        mode="sync",
        correction="cascade",
    ),
)
```

## VexConfig reference

| Field | Type | Default | Description |
|---|---|---|---|
| `mode` | `str` | `"async"` | `"async"` — fire-and-forget, zero latency overhead. `"sync"` — inline verification, enables guardrails. |
| `correction` | `str` | `"none"` | `"none"` — no correction attempted. `"cascade"` — runs the three-layer correction cascade on blocked outputs. |
| `transparency` | `str` | `"opaque"` | `"opaque"` — correction is invisible to callers (corrected output replaces original silently). `"transparent"` — result carries both original and corrected output. |
| `confidence_threshold` | `ThresholdConfig` | see below | Controls which action is taken based on the confidence score. |
| `api_url` | `str` | `"https://api.tryvex.dev"` | Base URL for the Vex API. Override for self-hosted deployments or testing. |
| `flush_interval_s` | `float` | `1.0` | How frequently (in seconds) the background flush thread sends buffered async events. |
| `flush_batch_size` | `int` | `50` | Maximum number of events sent in a single flush request. |
| `timeout_s` | `float` | `10.0` | HTTP request timeout in seconds for both sync verification and async flush requests. |
| `conversation_window_size` | `int` | `10` | Number of recent turns kept in session history for coherence checking. |
| `max_buffer_size` | `int` | `10000` | Maximum number of async events held in memory before overflow. Events are dropped (with a warning log) when this limit is reached. |
| `log_event_ids` | `bool` | `False` | When `True`, logs the `execution_id` of every event to stdout at INFO level. Useful for correlating Vex traces with your own logs during development. |

## ThresholdConfig reference

`ThresholdConfig` defines the confidence score boundaries that determine the `action` field in every `VexResult`. Import it from `vex.models`.

```python
from vex import Vex, VexConfig
from vex.models import ThresholdConfig

guard = Vex(
    api_key=os.environ["VEX_API_KEY"],
    config=VexConfig(
        confidence_threshold=ThresholdConfig(
            pass_threshold=0.85,
            flag_threshold=0.60,
            block_threshold=0.35,
        ),
    ),
)
```

| Field | Type | Default | Description |
|---|---|---|---|
| `pass_threshold` | `float` | `0.8` | Confidence at or above this value → `action="pass"` |
| `flag_threshold` | `float` | `0.5` | Confidence between `flag_threshold` and `pass_threshold` → `action="flag"` |
| `block_threshold` | `float` | `0.3` | Confidence below this value → `action="block"` |

<Note>
Pydantic enforces the constraint `block_threshold < flag_threshold < pass_threshold`. A `ConfigurationError` is raised at construction time if this ordering is violated.
</Note>

The three-value boundary produces exactly three outcome zones:

```
0.0 ──────── block ──────── flag ──────── pass ──────── 1.0
        0.3        0.5              0.8
```

Confidence scores between `block_threshold` and `flag_threshold` produce `action="block"`. Scores between `flag_threshold` and `pass_threshold` produce `action="flag"`. Scores at or above `pass_threshold` produce `action="pass"`.

## Common configuration patterns

<AccordionGroup>

<Accordion title="1. Async observability (default — monitoring only)">

The simplest configuration: record everything, verify in the background, never block a response. Use this when you are onboarding Vex and want full visibility before tuning thresholds or enabling guardrails.

```python
from vex import Vex, VexConfig

guard = Vex(
    api_key=os.environ["VEX_API_KEY"],
    config=VexConfig(
        mode="async",       # Default — no latency added
        correction="none",  # Default — no correction
    ),
)
```

In async mode, `result.confidence` is always `None` and `result.action` is always `"pass"`. Verification results appear in the dashboard but do not affect your application's behavior.

</Accordion>

<Accordion title="2. Sync verification — guardrails, no correction">

Enables inline verification so your code can inspect the confidence score and action before delivering the output. Blocked outputs raise `VexBlockError` and your code is responsible for the fallback. No correction is attempted.

```python
from vex import Vex, VexConfig

guard = Vex(
    api_key=os.environ["VEX_API_KEY"],
    config=VexConfig(
        mode="sync",
        correction="none",
    ),
)
```

Use this when you want hard guardrails and prefer to control the fallback logic yourself rather than relying on automatic correction.

</Accordion>

<Accordion title="3. Sync + correction cascade — full protection">

The most protective configuration. Low-confidence outputs are automatically corrected before being returned. If correction fails, `VexBlockError` is raised.

```python
from vex import Vex, VexConfig

guard = Vex(
    api_key=os.environ["VEX_API_KEY"],
    config=VexConfig(
        mode="sync",
        correction="cascade",
        transparency="transparent",  # Expose both original and corrected output
    ),
)
```

With `transparency="transparent"`, `result.original_output` contains the agent's raw response and `result.output` contains the corrected version. With `transparency="opaque"` (the default), only `result.output` is set and the correction is invisible to callers.

</Accordion>

<Accordion title="4. Custom confidence thresholds">

Tune the thresholds based on data from your async observability phase. Use tighter thresholds for high-stakes agents and looser thresholds for internal or low-risk ones.

```python
from vex import Vex, VexConfig
from vex.models import ThresholdConfig

# Tight thresholds for a customer-facing agent handling financial data.
guard = Vex(
    api_key=os.environ["VEX_API_KEY"],
    config=VexConfig(
        mode="sync",
        correction="cascade",
        confidence_threshold=ThresholdConfig(
            pass_threshold=0.90,
            flag_threshold=0.70,
            block_threshold=0.50,
        ),
    ),
)
```

```python
# Relaxed thresholds for an internal summarization tool.
guard_internal = Vex(
    api_key=os.environ["VEX_API_KEY"],
    config=VexConfig(
        mode="async",
        confidence_threshold=ThresholdConfig(
            pass_threshold=0.70,
            flag_threshold=0.40,
            block_threshold=0.20,
        ),
    ),
)
```

</Accordion>

</AccordionGroup>

## Environment variable pattern

Keep all sensitive values out of source code by reading configuration from environment variables:

```python
import os
from vex import Vex, VexConfig

guard = Vex(
    api_key=os.environ["VEX_API_KEY"],
    config=VexConfig(
        mode=os.environ.get("VEX_MODE", "async"),
        correction=os.environ.get("VEX_CORRECTION", "none"),
        api_url=os.environ.get("VEX_API_URL", "https://api.tryvex.dev"),
    ),
)
```

This pattern lets you use `mode="async"` in development and `mode="sync"` in production without code changes — configure the environment instead.
